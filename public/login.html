<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Login de Usuário</title>
</head>
<body>
  <h1>Login de Usuário</h1>

  <label for="email">Email:</label>
  <input type="email" id="email" required />
  <br />

  <label for="senha">Senha:</label>
  <input type="password" id="senha" required />
  <br />

  <button onclick="fazerLogin()">Entrar</button>

  <p id="mensagem"></p>

  <script>
    async function fazerLogin() {
      const email = document.getElementById("email").value;
      const senha = document.getElementById("senha").value;
      const mensagem = document.getElementById("mensagem");

      try {
        const resposta = await fetch("/marketing-multinivel/usuarios.json");
        const usuarios = await resposta.json();

        const usuario = usuarios.find(
          (u) => u.email === email && u.senha === senha
        );

        if (usuario) {
          localStorage.setItem("usuarioLogado", JSON.stringify(usuario));
          mensagem.style.color = "green";
          mensagem.textContent = "Login realizado com sucesso!";
          setTimeout(() => {
            window.location.href = "/painel.html";
          }, 1000);
        } else {
          mensagem.style.color = "red";
          mensagem.textContent = "Email ou senha incorretos.";
        }
      } catch (erro) {
        mensagem.style.color = "red";
        mensagem.textContent = "Erro ao conectar com o servidor.";
      }
    }
  </script>
</body>
</html>
