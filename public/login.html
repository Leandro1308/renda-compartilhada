<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Login de Usuário</title>
</head>
<body>
  <h1>Login de Usuário</h1>

  <label for="email">Email:</label>
  <input type="email" id="email" required />
  <br />

  <label for="senha">Senha:</label>
  <input type="password" id="senha" required />
  <br />

  <button onclick="fazerLogin()">Entrar</button>

  <p id="mensagem"></p>

  <script>
    async function fazerLogin() {
      const email = document.getElementById("email").value;
      const senha = document.getElementById("senha").value;

      try {
        const resposta = await fetch("/usuarios.json");
        const usuarios = await resposta.json();

        const usuario = usuarios.find((u) => u.email === email);

        if (!usuario) {
          document.getElementById("mensagem").style.color = "red";
          document.getElementById("mensagem").textContent = "Usuário não encontrado.";
          return;
        }

        const match = senha === "12345"; // Simulação (use bcrypt depois)

        if (match) {
          localStorage.setItem("usuario", JSON.stringify(usuario));
          document.getElementById("mensagem").style.color = "green";
          document.getElementById("mensagem").textContent = "Login realizado com sucesso!";
          setTimeout(() => {
            window.location.href = "/painel.html";
          }, 1000);
        } else {
          document.getElementById("mensagem").style.color = "red";
          document.getElementById("mensagem").textContent = "Senha incorreta.";
        }
      } catch (error) {
        document.getElementById("mensagem").style.color = "red";
        document.getElementById("mensagem").textContent = "Erro ao conectar com o servidor.";
      }
    }
  </script>
</body>
</html>
